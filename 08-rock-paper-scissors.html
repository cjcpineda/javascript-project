<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Paper Scissors</title>
</head>
<body>
<!--------------LEARNING OBEJECTS (goal: update the score) ------------------->

  <p> Rock Paper Scissors</p>
  
<!--------- ROCK --------->

  <button onclick="playGame('rock');">Rock</button>

<!-------- PAPRER -------->
  <button onclick="playGame('paper');">Paper</button>
  
<!-------- SCISSORS------->
  <button onclick="playGame('scissors')">Scissors</button>

<!-------- RESET SCORE --->
<button onClick="
  score.wins = 0;
  score.loses = 0;
  score.ties = 0;
  localStorage.removeItem('score'); 
"> Reset Score</button> <!-- removeItem so we can reset aka not store score/ erase the score-->

<!---- SHOW SCORE TALLY -->


<!--------------- SCRIPT --------------->

  <script>
    /*BEFORE LEARNING JSON
    const score = {
      wins: 0,
      loses: 0,
      ties: 0
    } */

    let score = JSON.parse(localStorage.getItem('score')) || {
        wins: 0,
        loses: 0,
        ties: 0
    }

    /*we used a default || operator above
    if (score === null) { // or (!score) also works
      score ={
        wins: 0,
        loses: 0,
        ties: 0
      }
    }*/


    // getItem gets a value out of localStorage. check below
    //console.log (localStorage.getItem('score'));
    // ----"score" above is only a string since we converted it below in JSON.stringify
    //converting it from string back to an object:
    console.log(JSON.parse(localStorage.getItem('score')));

    function playGame(playerMove) {
      const computerMove = pickComputerMove();
      let result ='';

      if(playerMove=== 'scissors'){ //scissors move
        if(computerMove === 'rock') {
          result = 'Loser';
        } else if (computerMove === 'paper') {
          result = 'Winner';
        } else if (computerMove === 'scissors') {
          result = 'Tie';
        }
      }

      else if(playerMove === 'paper'){ //paper move
        if(computerMove === 'rock') {
        result = 'Winner';
      } else if (computerMove === 'paper') {
        result = 'Tie';
      } else if (computerMove === 'scissors') {
        result = 'Loser';
      }
      }

      else if (playerMove === 'rock'){ //rock move
        if(computerMove === 'rock') {
          result = 'Tie.';
        } else if (computerMove === 'paper') {
          result = 'Loser';
        } else if (computerMove === 'scissors') {
          result = 'Winner';
        }
      }

      if (result === 'Winner'){
        score.wins = score.wins + 1;
      }
      else if (result === 'Loser') {
        score.loses = score.loses + 1;
      }
      else if (result === 'Tie') {
        score.ties = score.ties + 1;
      }
    
      /* ------------- SAVING A SCORE, will not reset after refreshing --------------------*/
      // localStorage only allows strings
      //JSON.stringify will convert score into a string
      localStorage.setItem('score', JSON.stringify(score)); 

      alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}
      Wins: ${score.wins} Loses ${score.loses} Ties: ${score.ties} `);
      console.log(`${playerMove} vs ${computerMove}. ${result}`)
    }
    

    

    function pickComputerMove(result) {
      const randomNumber = Math.random();

      let computerMove = '';

      if (randomNumber >= 0 && randomNumber < 1/3) {
        computerMove = 'rock';
      } else if (randomNumber >= 1/3 && randomNumber < 2/3 ){
        computerMove ='paper';
      } else if (randomNumber >= 2/3 && randomNumber < 3 ){ 2012276909
        computerMove = 'scissors';
      }

    return computerMove; 
    }

    function resetScore () {

    }
  </script>

</body>
</html>